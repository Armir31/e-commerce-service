{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\frontend\\\\src\\\\components\\\\OrderForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { ArrowLeft, Save, X, Plus, Trash2 } from 'lucide-react';\nimport { orderAPI, customerAPI, productAPI } from '../services/api';\nimport { formatPrice } from '../utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderForm = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  const isEditing = Boolean(id);\n  const [formData, setFormData] = useState({\n    costumer_id: '',\n    order_items: []\n  });\n  const [customers, setCustomers] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n  useEffect(() => {\n    fetchCustomers();\n    fetchProducts();\n    if (isEditing) {\n      fetchOrder();\n    }\n  }, [id]);\n  const fetchCustomers = async () => {\n    try {\n      const response = await customerAPI.getAll();\n      setCustomers(response.data);\n    } catch (error) {\n      console.error('Error fetching customers:', error);\n    }\n  };\n  const fetchProducts = async () => {\n    try {\n      const response = await productAPI.getAll();\n      setProducts(response.data);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    }\n  };\n  const fetchOrder = async () => {\n    try {\n      var _order$costumer, _order$costumer$id, _order$order_items;\n      setLoading(true);\n      const response = await orderAPI.getById(id);\n      const order = response.data;\n      setFormData({\n        costumer_id: ((_order$costumer = order.costumer) === null || _order$costumer === void 0 ? void 0 : (_order$costumer$id = _order$costumer.id) === null || _order$costumer$id === void 0 ? void 0 : _order$costumer$id.toString()) || '',\n        order_items: ((_order$order_items = order.order_items) === null || _order$order_items === void 0 ? void 0 : _order$order_items.map(item => {\n          var _item$product_id, _item$quantity;\n          return {\n            product_id: ((_item$product_id = item.product_id) === null || _item$product_id === void 0 ? void 0 : _item$product_id.toString()) || '',\n            quantity: ((_item$quantity = item.quantity) === null || _item$quantity === void 0 ? void 0 : _item$quantity.toString()) || '1'\n          };\n        })) || []\n      });\n    } catch (error) {\n      console.error('Error fetching order:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n  const addOrderItem = () => {\n    setFormData(prev => ({\n      ...prev,\n      order_items: [...prev.order_items, {\n        product_id: '',\n        quantity: '1'\n      }]\n    }));\n  };\n  const removeOrderItem = index => {\n    setFormData(prev => ({\n      ...prev,\n      order_items: prev.order_items.filter((_, i) => i !== index)\n    }));\n  };\n  const updateOrderItem = (index, field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      order_items: prev.order_items.map((item, i) => i === index ? {\n        ...item,\n        [field]: value\n      } : item)\n    }));\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.costumer_id) {\n      newErrors.costumer_id = 'Customer is required';\n    }\n    if (formData.order_items.length === 0) {\n      newErrors.order_items = 'At least one product is required';\n    } else {\n      formData.order_items.forEach((item, index) => {\n        if (!item.product_id) {\n          newErrors[`order_items.${index}.product_id`] = 'Product is required';\n        }\n        if (!item.quantity || parseInt(item.quantity) <= 0) {\n          newErrors[`order_items.${index}.quantity`] = 'Valid quantity is required';\n        }\n      });\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    try {\n      setLoading(true);\n      const submitData = {\n        ...formData,\n        costumer_id: parseInt(formData.costumer_id),\n        order_items: formData.order_items.map(item => ({\n          product_id: parseInt(item.product_id),\n          quantity: parseInt(item.quantity)\n        }))\n      };\n      if (isEditing) {\n        await orderAPI.update(id, submitData);\n      } else {\n        await orderAPI.create(submitData);\n      }\n      navigate('/orders');\n    } catch (error) {\n      console.error('Error saving order:', error);\n      setErrors({\n        submit: 'Failed to save order. Please try again.'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const calculateTotal = () => {\n    return formData.order_items.reduce((total, item) => {\n      const product = products.find(p => p.id.toString() === item.product_id);\n      if (product && item.quantity) {\n        return total + parseFloat(product.price) * parseInt(item.quantity);\n      }\n      return total;\n    }, 0);\n  };\n  if (loading && isEditing) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/orders'),\n        className: \"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n          className: \"h-4 w-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), \"Back to Orders\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-gray-900\",\n        children: isEditing ? 'Edit Order' : 'Create New Order'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mt-2\",\n        children: isEditing ? 'Update order information' : 'Create a new order for a customer'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"space-y-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow rounded-lg p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"costumer_id\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Customer *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"costumer_id\",\n            name: \"costumer_id\",\n            value: formData.costumer_id,\n            onChange: handleChange,\n            className: `block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm ${errors.costumer_id ? 'border-red-300' : 'border-gray-300'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select a customer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), customers.map(customer => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: customer.id,\n              children: [customer.first_name, \" \", customer.last_name, \" (\", customer.username, \")\"]\n            }, customer.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), errors.costumer_id && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-sm text-red-600\",\n            children: errors.costumer_id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700\",\n              children: \"Order Items *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: addOrderItem,\n              className: \"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",\n              children: [/*#__PURE__*/_jsxDEV(Plus, {\n                className: \"h-4 w-4 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 17\n              }, this), \"Add Product\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this), formData.order_items.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500\",\n              children: \"No products added yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-400\",\n              children: \"Click \\\"Add Product\\\" to get started\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 15\n          }, this), formData.order_items.map((item, index) => {\n            var _products$find, _products$find2;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-200 rounded-lg p-4 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-2\",\n                    children: \"Product *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: item.product_id,\n                    onChange: e => updateOrderItem(index, 'product_id', e.target.value),\n                    className: `block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm ${errors[`order_items.${index}.product_id`] ? 'border-red-300' : 'border-gray-300'}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select a product\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 263,\n                      columnNumber: 23\n                    }, this), products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: product.id,\n                      children: [product.name, \" - \", formatPrice(product.price)]\n                    }, product.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 265,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 21\n                  }, this), errors[`order_items.${index}.product_id`] && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-1 text-sm text-red-600\",\n                    children: errors[`order_items.${index}.product_id`]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-sm font-medium text-gray-700 mb-2\",\n                    children: \"Quantity *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: \"1\",\n                    value: item.quantity,\n                    onChange: e => updateOrderItem(index, 'quantity', e.target.value),\n                    className: `block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm ${errors[`orderItems.${index}.quantity`] ? 'border-red-300' : 'border-gray-300'}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 21\n                  }, this), errors[`orderItems.${index}.quantity`] && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-1 text-sm text-red-600\",\n                    children: errors[`orderItems.${index}.quantity`]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-end\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => removeOrderItem(index),\n                    className: \"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\",\n                    children: [/*#__PURE__*/_jsxDEV(Trash2, {\n                      className: \"h-4 w-4 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 299,\n                      columnNumber: 23\n                    }, this), \"Remove\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 17\n              }, this), item.product_id && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-3 p-3 bg-gray-50 rounded-md\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: [\"Unit Price: \", formatPrice(((_products$find = products.find(p => p.id.toString() === item.product_id)) === null || _products$find === void 0 ? void 0 : _products$find.price) || 0)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-gray-600\",\n                    children: [\"Subtotal: \", formatPrice((((_products$find2 = products.find(p => p.id.toString() === item.product_id)) === null || _products$find2 === void 0 ? void 0 : _products$find2.price) || 0) * parseInt(item.quantity || 0))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this);\n          }), errors.orderItems && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-sm text-red-600\",\n            children: errors.orderItems\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), formData.orderItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6 p-4 bg-gray-50 rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg font-medium text-gray-900\",\n              children: \"Order Total:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-2xl font-bold text-primary-600\",\n              children: formatPrice(calculateTotal())\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this), errors.submit && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6 p-4 bg-red-50 border border-red-200 rounded-md\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-red-600\",\n            children: errors.submit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => navigate('/orders'),\n            className: \"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",\n            children: [/*#__PURE__*/_jsxDEV(X, {\n              className: \"h-4 w-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 15\n            }, this), \"Cancel\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              className: \"h-4 w-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this), loading ? 'Saving...' : isEditing ? 'Update Order' : 'Create Order']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderForm, \"UC2J8lLJtPuRVY8/yyx7GtUwzy4=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = OrderForm;\nexport default OrderForm;\nvar _c;\n$RefreshReg$(_c, \"OrderForm\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","ArrowLeft","Save","X","Plus","Trash2","orderAPI","customerAPI","productAPI","formatPrice","jsxDEV","_jsxDEV","OrderForm","_s","navigate","id","isEditing","Boolean","formData","setFormData","costumer_id","order_items","customers","setCustomers","products","setProducts","loading","setLoading","errors","setErrors","fetchCustomers","fetchProducts","fetchOrder","response","getAll","data","error","console","_order$costumer","_order$costumer$id","_order$order_items","getById","order","costumer","toString","map","item","_item$product_id","_item$quantity","product_id","quantity","handleChange","e","name","value","target","prev","addOrderItem","removeOrderItem","index","filter","_","i","updateOrderItem","field","validateForm","newErrors","length","forEach","parseInt","Object","keys","handleSubmit","preventDefault","submitData","update","create","submit","calculateTotal","reduce","total","product","find","p","parseFloat","price","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","htmlFor","onChange","customer","first_name","last_name","username","type","_products$find","_products$find2","min","orderItems","disabled","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/frontend/src/components/OrderForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { ArrowLeft, Save, X, Plus, Trash2 } from 'lucide-react';\r\nimport { orderAPI, customerAPI, productAPI } from '../services/api';\r\nimport { formatPrice } from '../utils';\r\n\r\nconst OrderForm = () => {\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n  const isEditing = Boolean(id);\r\n\r\n  const [formData, setFormData] = useState({\r\n    costumer_id: '',\r\n    order_items: []\r\n  });\r\n\r\n  const [customers, setCustomers] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetchCustomers();\r\n    fetchProducts();\r\n    if (isEditing) {\r\n      fetchOrder();\r\n    }\r\n  }, [id]);\r\n\r\n  const fetchCustomers = async () => {\r\n    try {\r\n      const response = await customerAPI.getAll();\r\n      setCustomers(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching customers:', error);\r\n    }\r\n  };\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const response = await productAPI.getAll();\r\n      setProducts(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n    }\r\n  };\r\n\r\n  const fetchOrder = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await orderAPI.getById(id);\r\n      const order = response.data;\r\n      setFormData({\r\n        costumer_id: order.costumer?.id?.toString() || '',\r\n        order_items: order.order_items?.map(item => ({\r\n          product_id: item.product_id?.toString() || '',\r\n          quantity: item.quantity?.toString() || '1'\r\n        })) || []\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching order:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const addOrderItem = () => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      order_items: [...prev.order_items, { product_id: '', quantity: '1' }]\r\n    }));\r\n  };\r\n\r\n  const removeOrderItem = (index) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      order_items: prev.order_items.filter((_, i) => i !== index)\r\n    }));\r\n  };\r\n\r\n  const updateOrderItem = (index, field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      order_items: prev.order_items.map((item, i) => \r\n        i === index ? { ...item, [field]: value } : item\r\n      )\r\n    }));\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData.costumer_id) {\r\n      newErrors.costumer_id = 'Customer is required';\r\n    }\r\n\r\n    if (formData.order_items.length === 0) {\r\n      newErrors.order_items = 'At least one product is required';\r\n    } else {\r\n      formData.order_items.forEach((item, index) => {\r\n        if (!item.product_id) {\r\n          newErrors[`order_items.${index}.product_id`] = 'Product is required';\r\n        }\r\n        if (!item.quantity || parseInt(item.quantity) <= 0) {\r\n          newErrors[`order_items.${index}.quantity`] = 'Valid quantity is required';\r\n        }\r\n      });\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const submitData = {\r\n        ...formData,\r\n        costumer_id: parseInt(formData.costumer_id),\r\n        order_items: formData.order_items.map(item => ({\r\n          product_id: parseInt(item.product_id),\r\n          quantity: parseInt(item.quantity)\r\n        }))\r\n      };\r\n\r\n      if (isEditing) {\r\n        await orderAPI.update(id, submitData);\r\n      } else {\r\n        await orderAPI.create(submitData);\r\n      }\r\n\r\n      navigate('/orders');\r\n    } catch (error) {\r\n      console.error('Error saving order:', error);\r\n      setErrors({ submit: 'Failed to save order. Please try again.' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    return formData.order_items.reduce((total, item) => {\r\n      const product = products.find(p => p.id.toString() === item.product_id);\r\n      if (product && item.quantity) {\r\n        return total + (parseFloat(product.price) * parseInt(item.quantity));\r\n      }\r\n      return total;\r\n    }, 0);\r\n  };\r\n\r\n  if (loading && isEditing) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"mb-6\">\r\n        <button\r\n          onClick={() => navigate('/orders')}\r\n          className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4\"\r\n        >\r\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n          Back to Orders\r\n        </button>\r\n        <h1 className=\"text-3xl font-bold text-gray-900\">\r\n          {isEditing ? 'Edit Order' : 'Create New Order'}\r\n        </h1>\r\n        <p className=\"text-gray-600 mt-2\">\r\n          {isEditing ? 'Update order information' : 'Create a new order for a customer'}\r\n        </p>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        <div className=\"bg-white shadow rounded-lg p-6\">\r\n          {/* Customer Selection */}\r\n          <div className=\"mb-6\">\r\n            <label htmlFor=\"costumer_id\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Customer *\r\n            </label>\r\n            <select\r\n              id=\"costumer_id\"\r\n              name=\"costumer_id\"\r\n              value={formData.costumer_id}\r\n              onChange={handleChange}\r\n              className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm ${\r\n                errors.costumer_id ? 'border-red-300' : 'border-gray-300'\r\n              }`}\r\n            >\r\n              <option value=\"\">Select a customer</option>\r\n              {customers.map((customer) => (\r\n                <option key={customer.id} value={customer.id}>\r\n                  {customer.first_name} {customer.last_name} ({customer.username})\r\n                </option>\r\n              ))}\r\n            </select>\r\n            {errors.costumer_id && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{errors.costumer_id}</p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Order Items */}\r\n          <div className=\"mb-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700\">\r\n                Order Items *\r\n              </label>\r\n              <button\r\n                type=\"button\"\r\n                onClick={addOrderItem}\r\n                className=\"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\r\n              >\r\n                <Plus className=\"h-4 w-4 mr-1\" />\r\n                Add Product\r\n              </button>\r\n            </div>\r\n\r\n            {formData.order_items.length === 0 && (\r\n              <div className=\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                <p className=\"text-gray-500\">No products added yet</p>\r\n                <p className=\"text-sm text-gray-400\">Click \"Add Product\" to get started</p>\r\n              </div>\r\n            )}\r\n\r\n            {formData.order_items.map((item, index) => (\r\n              <div key={index} className=\"border border-gray-200 rounded-lg p-4 mb-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Product *\r\n                    </label>\r\n                    <select\r\n                      value={item.product_id}\r\n                      onChange={(e) => updateOrderItem(index, 'product_id', e.target.value)}\r\n                      className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm ${\r\n                        errors[`order_items.${index}.product_id`] ? 'border-red-300' : 'border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <option value=\"\">Select a product</option>\r\n                      {products.map((product) => (\r\n                        <option key={product.id} value={product.id}>\r\n                          {product.name} - {formatPrice(product.price)}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                    {errors[`order_items.${index}.product_id`] && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors[`order_items.${index}.product_id`]}</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Quantity *\r\n                    </label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      value={item.quantity}\r\n                      onChange={(e) => updateOrderItem(index, 'quantity', e.target.value)}\r\n                      className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm ${\r\n                        errors[`orderItems.${index}.quantity`] ? 'border-red-300' : 'border-gray-300'\r\n                      }`}\r\n                    />\r\n                    {errors[`orderItems.${index}.quantity`] && (\r\n                      <p className=\"mt-1 text-sm text-red-600\">{errors[`orderItems.${index}.quantity`]}</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex items-end\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => removeOrderItem(index)}\r\n                      className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\r\n                    >\r\n                      <Trash2 className=\"h-4 w-4 mr-1\" />\r\n                      Remove\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {item.product_id && (\r\n                  <div className=\"mt-3 p-3 bg-gray-50 rounded-md\">\r\n                    <div className=\"flex justify-between text-sm\">\r\n                      <span className=\"text-gray-600\">\r\n                        Unit Price: {formatPrice(products.find(p => p.id.toString() === item.product_id)?.price || 0)}\r\n                      </span>\r\n                      <span className=\"text-gray-600\">\r\n                        Subtotal: {formatPrice(\r\n                          (products.find(p => p.id.toString() === item.product_id)?.price || 0) * parseInt(item.quantity || 0)\r\n                        )}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n\r\n            {errors.orderItems && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{errors.orderItems}</p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Order Total */}\r\n          {formData.orderItems.length > 0 && (\r\n            <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-lg font-medium text-gray-900\">Order Total:</span>\r\n                <span className=\"text-2xl font-bold text-primary-600\">\r\n                  {formatPrice(calculateTotal())}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Submit Error */}\r\n          {errors.submit && (\r\n            <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-md\">\r\n              <p className=\"text-sm text-red-600\">{errors.submit}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Form Actions */}\r\n          <div className=\"flex justify-end space-x-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => navigate('/orders')}\r\n              className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\r\n            >\r\n              <X className=\"h-4 w-4 mr-2\" />\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              <Save className=\"h-4 w-4 mr-2\" />\r\n              {loading ? 'Saving...' : (isEditing ? 'Update Order' : 'Create Order')}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}